<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>여행 기록 상세보기</title>
    <link href="/docs/5.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/album/">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
<h1 class="fw-light">여행 기록 상세보기</h1>

<section class="py-5 text-center container">
    <div class="row py-lg-5">
        <div class="col-lg-6 col-md-8 mx-auto">
            <h2>기본 정보</h2>
            <p>제목: <span id="recordTitle"></span></p>
            <p>장소: <span id="location"></span></p>
            <p>시작 날짜: <span id="startDate"></span></p>
            <p>종료 날짜: <span id="endDate"></span></p>
        </div>
    </div>
</section>

<div class="album py-5 bg-light">
    <div class="container">
        <h2>비용</h2>
        <p><span id="cost"></span></p>

        <h2>본문</h2>
        <p><span id="content"></span></p>

        <a id="updateButton" class="btn btn-primary">수정</a>

    </div>
</div>
<script>
    $(document).ready(function () {

    var urlParams = new URLSearchParams(window.location.search);
    var recordId = urlParams.get('recordId');
    var url = "update_record.html?recordId=" + encodeURIComponent(recordId);
    document.getElementById('updateButton').href = url;

    //alert(recordId); // 확인용

    $.get("/fetch-record/" + recordId, function (data) {

        $('#recordTitle').text(data.recordTitle);
        $('#location').text(data.location);

        var startDate = new Date(data.startDate);
        var endDate = new Date(data.endDate);
        $('#startDate').text(startDate.toLocaleDateString());
        $('#endDate').text(endDate.toLocaleDateString());


    });

    //record-content를 가져오기 위한 부분

$.get("/fetch-record-content/" + recordId, function (data) {
    var contentHTML = "";
    for (var i = 0; i < data.length; i++) {
        contentHTML += "<p><b>" + data[i].date + "</b>: " + data[i].content + "</p>";
    }
    $('#content').html(contentHTML);
});




});

</script>






</body>

</html>

