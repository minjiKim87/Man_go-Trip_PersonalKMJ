# 0903 여행 기록 수정, 흐름

# 1. 기록 상세보기 : 본문 content 띄워주기

## 1) 리스트 페이지

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled.png)

- 장소 제목명 클릭 → 상세보기 페이지

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%201.png)

- 입력을 한 순서 = db에 post된 순서대로 내용이 들어가길래 날짜 순서대로 보여주도록 함

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%202.png)

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%203.png)

<aside>
💡 잠깐 고민한것 : 상세보기 페이지에서 바로 수정…? 근데 수정 페이지를 따로 두는게 나은것 같다.

</aside>

## 2) 수정 버튼(링크) 클릭 → 수정 페이지

- 방금 본 상세정보의 내용을 그대로 가져오면서, 텍스트 필드말고 입력필드로 받음
    - 본문 content내용이 존재할 경우 보여주고, 없다면 날짜에 빈칸으로 보여줌

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%204.png)

# 2. 수정페이지에서 update

## 3)update 하기 1 : 기본정보(제목, 장소)랑 본문 내용

![입력필드에서 바로 수정 ](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%205.png)

입력필드에서 바로 수정 

제목, 장소, 본문 내용 수정 입력

![저장 성공](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%206.png)

저장 성공

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%207.png)

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%208.png)

update 잘 됨

- 이때 본문 내용 수정하면 PUT으로 반영, 추가시 POST로 반영. 다만 빈칸일 경우에는 데이터베이스에 아예 추가되지 않도록 함

## 4)update 하기 2 : 날짜 관련

- 기존은 24~30일

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%209.png)

- 22~25로 기본정보 수정하면 페이지 reload시
    - records의 데이터베이스 테이블 start_date, end_date변경됨
    - 수정 페이지에서 밑에 본문이 24~30일로 띄워져있던게 변경됨

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2010.png)

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2011.png)

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%204.png)

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2012.png)

→ 본문 템플릿 보여주는것도 자동 수정

## 5)update 날짜수정과 본문 내용 관련

- 기본 정보 날짜 수정을 하면, records의 기본 정보와, 보여지는 본문 content의 템플릿(날짜별 입력 필드)가 바뀐다
- 그러면 기존 날짜의 content값은 어떻게 할까?

예시로 위에서 24~30에서 22~25로 수정했는데, 그럼 기존의 26~30(중에 content가 존재하던 행들.빈칸이면 행도 없음)은 어떻게 되나

일단은 삭제하지 않도록 냅뒀다.

만약에 날짜를 또 수정하면 그때의 남아있던 값이 다시 불러와진다.

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2013.png)

원래는 팝업창 같은것 띄워서 미해당 날짜 삭제되는데 괜찮습니까? 물어보고 날짜 변경시 해당하지 않는 날짜의 값도 삭제할것 같은데 

날짜 다시 수정하는 이슈랑

지웠다가 망할까봐 일단 이대로 냅둠

# 3. 간단한 CSS 추가함

# 4. 흐름 + 버튼 추가

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2014.png)

<aside>
💡 새 여행기록 작성 클릭

</aside>

- 새 여행기록 작성 클릭시 : 기본정보 저장, 템플릿 생성, contents 저장

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2015.png)

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2016.png)

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2017.png)

- 여행 기록 리스트로 가기 버튼 클릭 → 내용 추가

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2018.png)

<aside>
💡 간단 여행기록 추가

</aside>

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2019.png)

- submit누르면 reload되고, 리스트 밑에 보면 내용 추가

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2020.png)

<aside>
💡 제목 클릭시 → 상세보기 페이지

</aside>

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2021.png)

<aside>
💡 수정 클릭시 → 수정 페이지

</aside>

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2022.png)

- 기록 상세 보기 누르면 해당 기록 id페이지로 감
- 여행기록 리스트로 가는 버튼.

![Untitled](0903%20%E1%84%8B%E1%85%A7%E1%84%92%E1%85%A2%E1%86%BC%20%E1%84%80%E1%85%B5%E1%84%85%E1%85%A9%E1%86%A8%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%A5%E1%86%BC,%20%E1%84%92%E1%85%B3%E1%84%85%E1%85%B3%E1%86%B7%2038a6417f2c3a4d989a77d23e0cb300e4/Untitled%2023.png)

# 할것

1. 프론트 모양새를 시도해볼까…이것도 오래걸릴것 같아서 지금 해봐도  될것 같다
    - 아니면 합치는게 우선인가
2. 개인적으로 먼저 할 수 있는건 완전 부가기능인 해시태그 기능
    - 본문 content에서 #해시태그 인식 후 db에 저장, 보여주기, content 수정시 해시태그도 같이 업데이트 등등…
    - `var hashtags = text.match(/#\w+/g);`
3. html이랑 js 분리…근데 프론트까지 하고 해도 될지도